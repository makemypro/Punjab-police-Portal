{% extends 'myapp/base.html' %}
{% load static %}
    
	<!-- <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
	<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
	<script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </head> -->
  
{% block body %}
<link href="{% static 'myapp/css/detail.css' %}" rel="stylesheet">
	
<section id="center" class="clearfix center_shop">
<div class="container">
 <div class="row">
   <div class="center_shop_1 clearfix">
    <div class="col-sm-6">
	 <div class="center_shop_1l clearfix">
	  <h3 class="mgt">Product Details</h3>
	 </div>
	</div>
	<div class="col-sm-6">
	 <div class="center_shop_1r text-right clearfix">
	  <h5><a class="col_2" href="#">Home</a> / <a class="col_2" href="#">Product List</a> / <span>Product Details</span></h5>
	 </div>
	</div>
   </div>
 </div>
</div>
</section>

<section id="shop_detail">
<div class="container">
 <div class="row">
   <div class="shop_detail_1 clearfix">
    <div class="col-sm-6">
	 <div class="center_detail_2_left clearfix">
		   <div class="carousel slide article-slide" id="article-photo-carousel">

		  <!-- Wrapper for slides -->
		  <div class="carousel-inner cont-slider">
		
			<div class="item active">
			  <div class="mag">
                <div class="magnify"><div class="magnify"><img data-toggle="magnify" src="/media/{{selected_product.image}}" alt=""><div class="magnify-large" style="background: url(&quot;img/b.png&quot;) no-repeat;"></div></div><div class="magnify-large"></div></div>
            </div>
			</div>
			<div class="item">
			  <div class="mag">
                <div class="magnify"><div class="magnify"><img data-toggle="magnify" src="/media/{{selected_product.image}}" alt=""><div class="magnify-large" style="background: url(&quot;img/54.jpg&quot;) no-repeat;"></div></div><div class="magnify-large"></div></div>
            </div>
			</div>
			<div class="item">
			  <div class="mag">
                <div class="magnify"><div class="magnify"><img data-toggle="magnify" src="/media/{{selected_product.image}}" alt=""><div class="magnify-large" style="background: url(&quot;img/55.jpg&quot;) no-repeat;"></div></div><div class="magnify-large"></div></div>
            </div>
			</div>
			<div class="item ">
			  <div class="mag">
                <div class="magnify"><div class="magnify"><img data-toggle="magnify" src="/media/{{selected_product.image}}" alt=""><div class="magnify-large" style="background: url(&quot;img/b2.jpg&quot;) -101px -21px no-repeat; display: block; left: 17px; top: -27.5px; opacity: 0;"></div></div><div class="magnify-large"></div></div>
            </div>
			</div>
		  </div>
		  <!-- Indicators -->
		  <ol class="carousel-indicators">
			<li class="active" data-slide-to="0" data-target="#article-photo-carousel">
			  <img alt="" src="/media/{{selected_product.image}}">
			</li>
			<li class="" data-slide-to="1" data-target="#article-photo-carousel">
			  <img alt="" src="/media/{{selected_product.image}}">
			</li>
			<li class="" data-slide-to="2" data-target="#article-photo-carousel">
			  <img alt="" src="/media/{{selected_product.image}}">
			</li>
			<li class="" data-slide-to="3" data-target="#article-photo-carousel">
			  <img alt="" src="/media/{{selected_product.image}}">
			</li>
		  </ol>
        </div>
		 </div>
	</div>
	<div class="col-sm-6">
	 <div class="center_detail_2_right clearfix">
		 <h3 class="mgt">{{selected_product.name}}</h3>
		 	<h4> <span class="span_2 col_1">{{selected_product.price}}/ </span><strong> Rs.</strong></span></h4>
		<p>.</p>
		<hr>
		<h4>Available Options</h4>
		<div class="pd_n clearfix">
		   <h5 class="bold">Color <span class="col_2">*</span></h5>
		   <ul>
		    <li class="bg_1 act"></li>
			<li class="bg_5"></li>
		   </ul>
		 </div>
		 <h5>Quantity:</h5>
		 <div class="input-group number-spinner">
				<span class="input-group-btn">
					<button class="btn btn-default" data-dir="dwn"><span class="glyphicon glyphicon-minus"></span></button>
				</span>
	
				<input type="text" class="form-control text-center" value="1" name="qty">
		
				<span class="input-group-btn">
					<button class="btn btn-default" data-dir="up"><span class="glyphicon glyphicon-plus"></span></button>
				</span>			</div>
		 <div class="pd_n1 clearfix">
		  		<h4><a href=" {% url 'cart_add' selected_product.id %}" class="button" href="#">ADD TO CART</a></h4>
			</div>

		<ul class="social-network social-circle">
                        <li><a href="#" class="icoRss" title="Rss"><i class="fa fa-rss"></i></a></li>
                        <li><a href="#" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#" class="icoTwitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#" class="icoGoogle" title="Google +"><i class="fa fa-google-plus"></i></a></li>
                        <li><a href="#" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
        </ul>
    </div>
	</div>
   </div>
   <div class="product_detail_1 clearfix">
		   <ul class="nav nav-tabs tab_1">
			  <li class="active"><a data-toggle="tab" href="#home"><i class="fa fa-globe"></i> Description</a></li>
			  <li class=""><a data-toggle="tab" href="#menu1"><i class="fa fa-photo"></i> Additional Information</a></li>
			  <li class=""><a data-toggle="tab" href="#menu2"><i class="fa fa-cog"></i> Product Review</a></li>
           </ul>
		   <div class="tab-content clearfix">
			  <div id="home" class="tab-pane fade clearfix active in">
				 <div class="click clearfix">
					<div class="col-sm-12">
					 <div class="home_i">
						{% if selected_product.description%}
					   <p class="mgt">{{selected_product.Description}}</p>
					   {% else %}
					   <p class="mgt">No Description Available</p>
					   {% endif %}
					   </ul>
					 </div>
					</div>
			   </div>
			  </div>
			  <div id="menu1" class="tab-pane fade clearfix">
				 <div class="click clearfix">
					<div class="col-sm-12">
					  <div class="menu_i clearfix">
					    <table>
						  <tbody>
						  <tr>
							<td>Pricing</td>
							<td>{{selected_product.price}}</td>
						  </tr>
						  <tr>
							<td>Stock Availability</td>
							<td>{{selected_product.availability}}</td>
						  </tr>

						  <tr>
							<td>Rating</td>
							<td>
							<span>
							 <i class="fa fa-star"></i>
							 <i class="fa fa-star"></i>
							 <i class="fa fa-star"></i>
							 <i class="fa fa-star"></i>
							 <i class="fa fa-star"></i>
							</span>
							</td>
						  </tr>
						  
					   </tbody>
	                    </table>
					  </div>
					</div>
			   </div>
			  </div>
			  <div id="menu2" class="tab-pane fade clearfix">
				 <div class="click clearfix">
					<div class="col-sm-12">
						{% for rat in rating%}
					 <div class="menu1i clearfix">
					   <div class="menu1ii mgt clearfix">
					    <div class="col-sm-9">
						<img class="thumbnail" src="/media/{{selected_product.image}}" alt="abc">
						<h5><span class="bold">{{rat.user.username}}</span> <span class="date"><i class="fa fa-clock-o"></i>  May 9, 2019</span></h5>
						<p>{{rat.review}}.</p>
						</div>
						<div class="col-sm-3 text-right">
						 <span class="">
							{% if rat.rating == 1%}
						 <i class="fa fa-star"></i>
						 {% elif rat.rating == 2%}
						 <i class="fa fa-star"></i>
						 <i class="fa fa-star"></i>
						 {% elif rat.rating == 3 %}
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 {% elif rat.rating == 4%}
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 {% else %}
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
						 <i class="fa fa-star-o"></i>
{% endif %}
						 </span>
						</div>
					   </div>
					{% endfor %}
					  
					   <div class="menu1i1 clearfix">
					    <div class="col-sm-6 space_left">
						<h4>ADD A REVIEW</h4>
						{% csrf_token %}
						<form method="post">

						<h5>Name *</h5>
						<input class="form-control" type="text" name="name">
						<h5>Email *</h5>
						<input class="form-control" type="text" name = "email">
						<h5>Rating *</h5>
						<input class="form-control" type="number" max="5" min="1" placeholder="3" name = "rating">
						<h5>Your Review</h5>
						<textarea class="form-control form_1" name = "review"></textarea>
						<h5 class="bg"><a href="#"><input type="submit" class="button"  value="Submit"></h5></a>
					</form>	
					</div>
						<div class="col-sm-6">
						 <div class="grid clearfix">
		                   <figure class="effect-jazz">
			                <a href="#"><img src="/media/{{selected_product.image}}" height="400" class="iw" alt="img25"></a>
		                   </figure>
	                     </div>
						</div>
					   </div>
					 </div>
					</div>
			   </div>
			  </div>
			</div>
	 </div>
 </div>
</div>
</section>


<script>
	/*
Credits:
https://github.com/marcaube/bootstrap-magnify
*/


!function ($) {

    "use strict"; // jshint ;_;


    /* MAGNIFY PUBLIC CLASS DEFINITION
     * =============================== */

    var Magnify = function (element, options) {
        this.init('magnify', element, options)
    }

    Magnify.prototype = {

        constructor: Magnify

        , init: function (type, element, options) {
            var event = 'mousemove'
                , eventOut = 'mouseleave';

            this.type = type
            this.$element = $(element)
            this.options = this.getOptions(options)
            this.nativeWidth = 0
            this.nativeHeight = 0

            this.$element.wrap('<div class="magnify" \>');
            this.$element.parent('.magnify').append('<div class="magnify-large" \>');
            this.$element.siblings(".magnify-large").css("background","url('" + this.$element.attr("src") + "') no-repeat");

            this.$element.parent('.magnify').on(event + '.' + this.type, $.proxy(this.check, this));
            this.$element.parent('.magnify').on(eventOut + '.' + this.type, $.proxy(this.check, this));
        }

        , getOptions: function (options) {
            options = $.extend({}, $.fn[this.type].defaults, options, this.$element.data())

            if (options.delay && typeof options.delay == 'number') {
                options.delay = {
                    show: options.delay
                    , hide: options.delay
                }
            }

            return options
        }

        , check: function (e) {
            var container = $(e.currentTarget);
            var self = container.children('img');
            var mag = container.children(".magnify-large");

            // Get the native dimensions of the image
            if(!this.nativeWidth && !this.nativeHeight) {
                var image = new Image();
                image.src = self.attr("src");

                this.nativeWidth = image.width;
                this.nativeHeight = image.height;

            } else {

                var magnifyOffset = container.offset();
                var mx = e.pageX - magnifyOffset.left;
                var my = e.pageY - magnifyOffset.top;

                if (mx < container.width() && my < container.height() && mx > 0 && my > 0) {
                    mag.fadeIn(100);
                } else {
                    mag.fadeOut(100);
                }

                if(mag.is(":visible"))
                {
                    var rx = Math.round(mx/container.width()*this.nativeWidth - mag.width()/2)*-1;
                    var ry = Math.round(my/container.height()*this.nativeHeight - mag.height()/2)*-1;
                    var bgp = rx + "px " + ry + "px";

                    var px = mx - mag.width()/2;
                    var py = my - mag.height()/2;

                    mag.css({left: px, top: py, backgroundPosition: bgp});
                }
            }

        }
    }


    /* MAGNIFY PLUGIN DEFINITION
     * ========================= */

    $.fn.magnify = function ( option ) {
        return this.each(function () {
            var $this = $(this)
                , data = $this.data('magnify')
                , options = typeof option == 'object' && option
            if (!data) $this.data('tooltip', (data = new Magnify(this, options)))
            if (typeof option == 'string') data[option]()
        })
    }

    $.fn.magnify.Constructor = Magnify

    $.fn.magnify.defaults = {
        delay: 0
    }


    /* MAGNIFY DATA-API
     * ================ */

    $(window).on('load', function () {
        $('[data-toggle="magnify"]').each(function () {
            var $mag = $(this);
            $mag.magnify()
        })
    })

} ( window.jQuery );
	</script>
	
<script>
	$(document).on('click', '.number-spinner button', function () {    
	var btn = $(this),
		oldValue = btn.closest('.number-spinner').find('input').val().trim(),
		newVal = 0;
	
	if (btn.attr('data-dir') == 'up') {
		newVal = parseInt(oldValue) + 1;
	} else {
		if (oldValue > 1) {
			newVal = parseInt(oldValue) - 1;
		} else {
			newVal = 1;
		}
	}
	btn.closest('.number-spinner').find('input').val(newVal);
});
	</script>

{% endblock %}